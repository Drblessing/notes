# SSH Server Configuration for Ubuntu

# File location: /etc/ssh/sshd_config

# Restart SSH after editing: sudo systemctl restart ssh

# Network Configuration

Port 22
AddressFamily any
ListenAddress 0.0.0.0
ListenAddress ::

# Protocol and Ciphers

Protocol 2
Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha2-256,hmac-sha2-512
KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512

# Authentication Settings

PubkeyAuthentication yes
PasswordAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
KbdInteractiveAuthentication no
UsePAM yes

# Root and User Restrictions

PermitRootLogin no
MaxAuthTries 3
MaxSessions 3
MaxStartups 10:30:60

# Key Files

AuthorizedKeysFile .ssh/authorized_keys .ssh/authorized_keys2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key

# Session Settings

ClientAliveInterval 300
ClientAliveCountMax 2
LoginGraceTime 60
TCPKeepAlive yes

# Security Features

AllowTcpForwarding yes
X11Forwarding no
PrintMotd no
PrintLastLog yes
PermitUserEnvironment no
AcceptEnv LANG LC\_\*

# Subsystems

Subsystem sftp /usr/lib/openssh/sftp-server

# Logging

SyslogFacility AUTH
LogLevel INFO

# Additional Security

StrictModes yes
IgnoreRhosts yes
HostbasedAuthentication no
PermitTunnel no
Banner /etc/ssh/banner.txt
